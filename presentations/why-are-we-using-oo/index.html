<!DOCTYPE html>

<html>
<head>
    <title>Go simple, not easy</title>
    <meta charset='utf-8'>
    <link rel="stylesheet" href="../lib/html5slides/valtech.css"/>
    <link rel="stylesheet" href="../lib/c64.css"/>
</head>


<body style='display: none'>

<section class='slides layout-regular template-valtech'>

    <article>
        <h1>
            Varför objektorienterar vi egentligen?
        </h1>
        <p>
            <br>
            Jimmy Larsson - @jimlar
        </p>
    </article>

    <article>
        <h1>
            OO is <u>not</u> the natural paradigm for the web!
        </h1>
    </article>

    <article>
        <h2>Me</h2>
        <ul>
            <li>Valtechie since 2007</li>
            <li>Coding my way through the last 28 years or so</li>
            <li>ASM, C, C++, Pascal, Scheme, Perl, Java, Ruby, Python, Scala, Clojure...</li>
            <li>Architecture</li>
            <li>Devops</li>
        </ul>
    </article>

    <article>
        <h1>Web appplications</h1>
    </article>

    <article>
        <h2>What's a web app anyway?</h2>
        <br/>
        <br/>
        <img src="webapp_as_a_filter.svg" height="60%"/>
    </article>

    <article>
        <div class="c64">
            <div class="bg-type1">
                <div class="bg-type2 basicscreen font-type1 text-space">
                    <div class="txt-header">
                        <ul class="txt-header-list">
                            <li>**** COMMODORE 64 BASIC V2 ****</li>
                            <li>64K RAM SYSTEM 38911 BASIC BYTES FREE</li>
                        </ul>
                        READY.<br>
                        <br>
                        10 LOAD "DATA"<br>
                        20 TRANSFORM "DATA"<br>
                        30 IF X="DONE" THEN 50: END<br>
                        40 GOTO 10<br>
                        50 SAVE "DATA"<br>
                        60 OUTPUT "HTML"<br>

                    </div>
                    <img src="../lib/prompt.gif">
                </div>
            </div>
        </div>
    </article>

    <article>
        <!-- Breaking and creating abstractions, -->
        <h1>Abstractions</h1>
    </article>

    <article>
        <!-- Lambda, turing, liskov ...  abstracting what vs how, Formal vs informal (kodstandarder, patterns, etc) -->
        <h2>Church vs. Turing</h2>
        <img src="computational_models.png" height="80%"/>
        <p>&copy; Jessica Kerr - http://http://blog.jessitron.com/</p>
    </article>

    <article>
        <h1>OO Web appplications</h1>
    </article>

    <article>
        <h2>Typical implementation</h2>
        <ul>
            <li>Receive request</li>
            <li>Create objects and read data into them</li>
            <li>Call methods on objects, mutating state</li>
            <li>Fetch changes from objects</li>
            <li>Save</li>
            <li>Render HTML from the objects</li>
            <li>Throw away the objects</li>
        </ul>
    </article>

    <article>
        <h2>But is it actually OO?</h2>
        <ul>
            <li>ORM - objects encapsulating data</li>
            <li>"MVC" - reacting to requests, rendering HTML</li>
            <li>Utils.java</li>
            <li>users_helper.rb</li>
        </ul>
    </article>

    <article>
        <h2>Intrinsic or incidental?</h2>
        <ul>
            <li>MVC</li>
            <li>ORM</li>
            <li>OO</li>
        </ul>
    </article>

    <article>
        <h1>What about FP?</h1>
    </article>

    <article>
        <h2>What is Functional Programming?</h2>
        <ul>
            <li>f(x) = y</li>
            <li>Mathematical vs data transformation</li>
        </ul>
        <pre>
(range 3) => [0 1 2]
(map inc (range 3)) => [1 2 3]</pre>
        <pre>find . -name '*.txt' | xargs cat | grep 'ERROR' | sort | uniq -c</pre>
    </article>

    <article>
        <h2>What happens to common patterns?</h2>
        <ul>
            <li>Strategy</li>
            <li>Template method</li>
            <li>Dependency injection</li>
        </ul>
        <ul>
            <li>Map - reduce</li>
        </ul>

    </article>

    <article>
        <h2>Functional web apps</h2>
        <ul>
            <li>read data (request, database, integration)</li>
            <li>save changed data</li>
            <li>transform to html</li>
        </ul>
        <ul>
            <li>data is data</li>
        </ul>
    </article>


    <article>
        <h1>Code samples</h1>
    </article>

    <article>
        <h2>Data access</h2>
        <pre title="clojure.java.jdbc">(def db "postgresql://localhost:5432/test_db")
(query db
    (select * :persons
        (order-by :name)))

=> [{:name "Irma"} {:name "Isabel"} {:name "Lova"} ..]</pre>
        <pre title="sqlkorma">
(defentity address
    (table-fields :street :city :zip))

(defentity users
    (has-one address))

(select users
    (with address))</pre>
    </article>
    <article>
        <h2>Integrations</h2>
        <pre>
(def url "http://www.debaser.se/debaser/api/?format=json...")

(-> url slurp json/parse-string)

=> [{"EventId" "3435" "EventDate" "2010-01-01" ...} ..]
        </pre>
    </article>
    <article>
        <h2>Transform to HTML</h2>
        <pre>
(html [:ul
    (for [x (range 1 4)]
        [:li x])])
=> "&lt;ul&gt;&lt;li&gt;1&lt;/li&gt;&lt;li&gt;2&lt;/li&gt;&lt;li&gt;3&lt;/li&gt;&lt;/ul&gt;"
        </pre>
    </article>
    <article>
        <h2>Transform to HTML - with template</h2>
        <pre>
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
    &lt;head&gt;
        &lt;title&gt;Enlive Tutorial!&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;p&gt;Hello world!&lt;/p&gt;
        &lt;p id="message"&gt;A message could go here.&lt;/p&gt;
    &lt;/body&gt;
&lt;/html&gt;
        </pre>
        <pre>
(html/deftemplate index "template1.html" [input]
    [:p#message] (html/content (:message input)))
    (index {:message "Hello world!"})
        </pre>
    </article>

    <article>
        <h2>Routing</h2>
        <pre>
(defroutes app
    (GET "/user/:id" [id] (user-page id))
    (route/not-found (render-404))
        </pre>
    </article>

    <article>
        <h2>Tests</h2>
        <pre>
(fact "parse line gives empty vector on bad line"
    (parse-line "") => {}
    (parse-line " ") => {}
    (parse-line " put") => {}
    (parse-line "\n") => {})
        </pre>
    </article>
    <article>
        <!-- kända datatyper i funktionsanropen, vs. gömt i objekten -->
        <h2>Testability</h2>
        <img src="circuit-board.jpg"/>
    </article>

    <article>
        <h2>Learnning FP</h2>
        <ul>
            <li>Paradigm shift hard, languages easy</li>
            <li>Usable knowledge</li>
            <li>Better reuse</li>
        </ul>
    </article>

    <article>
        <img src="fibonacci.png"/>
    </article>
</section>

<script src='../lib/html5slides/slides.js'></script>
<script src="../lib/revealjs/lib/highlight.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

</body>
</html>
